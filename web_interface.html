<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VET-ASSISTANT-CLI Web Interface</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background-color: #fafafa;
        }
        .section h3 {
            color: #34495e;
            margin-bottom: 15px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        select, input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
        button:hover {
            background-color: #2980b9;
        }
        .output {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .char-count {
            font-weight: bold;
            color: #e74c3c;
        }
        .char-count.valid {
            color: #27ae60;
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .emoji-guide {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¾ VET-ASSISTANT-CLI</h1>
        <p style="text-align: center; color: #666;">@souhei1219ã®XæŠ•ç¨¿ç”Ÿæˆãƒ„ãƒ¼ãƒ«</p>
        
        <div class="section">
            <h3>ğŸ“š ãƒšãƒ«ã‚½ãƒŠå­¦ç¿’çŠ¶æ³</h3>
            <div id="learnStatus">
                <p>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: <span id="statusText">æœªç¢ºèª</span></p>
                <p>å­¦ç¿’ãƒ‡ãƒ¼ã‚¿: <span id="dataCount">-</span>ä»¶</p>
                <p>ã‚ˆãä½¿ã†çµµæ–‡å­—: <span id="emojis">-</span></p>
            </div>
            <button onclick="checkLearningStatus()">å­¦ç¿’çŠ¶æ³ã‚’ç¢ºèª</button>
        </div>

        <div class="section">
            <h3>ğŸ“ æŠ•ç¨¿ç”Ÿæˆ</h3>
            
            <div class="form-group">
                <label for="postType">æŠ•ç¨¿ã‚¿ã‚¤ãƒ—:</label>
                <select id="postType">
                    <option value="specialty">specialty (å°‚é–€ãƒ†ãƒ¼ãƒ)</option>
                    <option value="cat-breed">cat-breed (çŒ«ç¨®ç‰¹é›†)</option>
                    <option value="interactive">interactive (å‚åŠ å‹)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dayOfWeek">æ›œæ—¥:</label>
                <select id="dayOfWeek">
                    <option value="mon">æœˆæ›œæ—¥</option>
                    <option value="tue">ç«æ›œæ—¥</option>
                    <option value="wed">æ°´æ›œæ—¥</option>
                    <option value="thu">æœ¨æ›œæ—¥</option>
                    <option value="fri">é‡‘æ›œæ—¥</option>
                    <option value="sat">åœŸæ›œæ—¥</option>
                    <option value="sun">æ—¥æ›œæ—¥</option>
                </select>
            </div>

            <div class="form-group">
                <label for="topic">ãƒˆãƒ”ãƒƒã‚¯:</label>
                <input type="text" id="topic" placeholder="ä¾‹: çŒ«ã®ç†±ä¸­ç—‡" value="çŒ«ã®ç†±ä¸­ç—‡">
                <div class="emoji-guide">
                    ğŸ’¡ ä¾‹: çŒ«ã®è…è‡“ç—…ã€ã‚¢ãƒ¡ãƒªã‚«ãƒ³ã‚·ãƒ§ãƒ¼ãƒˆãƒ˜ã‚¢ã€çŒ«ã®å¤‰ãªç™–ãªã©
                </div>
            </div>

            <button onclick="generatePost()">æŠ•ç¨¿ã‚’ç”Ÿæˆ</button>
        </div>

        <div class="section">
            <h3>ğŸ“‹ ç”Ÿæˆçµæœ</h3>
            <div id="output" class="output">ã“ã“ã«ç”Ÿæˆã•ã‚ŒãŸæŠ•ç¨¿ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
            <div id="charCount" class="char-count">æ–‡å­—æ•°: 0æ–‡å­—</div>
        </div>

        <div class="section">
            <h3>ğŸ› ï¸ ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ç‰ˆã®ä½¿ç”¨æ–¹æ³•</h3>
            <div class="output">
# ãƒšãƒ«ã‚½ãƒŠå­¦ç¿’
python main.py learn "C:\Users\souhe\Desktop\Xéå»æŠ•ç¨¿"

# æŠ•ç¨¿ç”Ÿæˆ
python main.py x-post --type specialty --day mon --topic "çŒ«ã®ç†±ä¸­ç—‡"

# å¯¾è©±å¼ç”Ÿæˆ
generate_post.bat ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯
            </div>
        </div>
    </div>

    <script>
        // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆï¼ˆæ”¹è¡Œé™¤å¤–ï¼‰
        function countCharacters(text) {
            return text.replace(/\n/g, '').length;
        }

        // å­¦ç¿’çŠ¶æ³ç¢ºèª
        async function checkLearningStatus() {
            try {
                const response = await fetch('/api/status');
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('statusText').textContent = data.learned ? 'å­¦ç¿’æ¸ˆã¿' : 'æœªå­¦ç¿’';
                    document.getElementById('dataCount').textContent = data.dataCount || '-';
                    document.getElementById('emojis').textContent = data.emojis ? data.emojis.join(', ') : '-';
                } else {
                    // ã‚µãƒ¼ãƒãƒ¼ãŒç„¡ã„å ´åˆã®ãƒ¢ãƒƒã‚¯è¡¨ç¤º
                    document.getElementById('statusText').textContent = 'å­¦ç¿’æ¸ˆã¿ï¼ˆç°¡æ˜“ç‰ˆï¼‰';
                    document.getElementById('dataCount').textContent = '7,581';
                    document.getElementById('emojis').textContent = 'ğŸ±, âœ…, ğŸ’¡';
                }
            } catch (error) {
                // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒƒã‚¯
                document.getElementById('statusText').textContent = 'å­¦ç¿’æ¸ˆã¿ï¼ˆç°¡æ˜“ç‰ˆï¼‰';
                document.getElementById('dataCount').textContent = '7,581';
                document.getElementById('emojis').textContent = 'ğŸ±, âœ…, ğŸ’¡';
            }
        }

        // æŠ•ç¨¿ç”Ÿæˆï¼ˆãƒ¢ãƒƒã‚¯ç‰ˆï¼‰
        async function generatePost() {
            const postType = document.getElementById('postType').value;
            const day = document.getElementById('dayOfWeek').value;
            const topic = document.getElementById('topic').value;

            if (!topic.trim()) {
                alert('ãƒˆãƒ”ãƒƒã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }

            document.getElementById('output').textContent = 'ç”Ÿæˆä¸­...';

            try {
                const response = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ type: postType, day: day, topic: topic })
                });

                if (response.ok) {
                    const data = await response.json();
                    displayPost(data.content);
                } else {
                    // ã‚µãƒ¼ãƒãƒ¼ãŒç„¡ã„å ´åˆã®ãƒ¢ãƒƒã‚¯ç”Ÿæˆ
                    generateMockPost(postType, day, topic);
                }
            } catch (error) {
                // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒƒã‚¯
                generateMockPost(postType, day, topic);
            }
        }

        // ãƒ¢ãƒƒã‚¯æŠ•ç¨¿ç”Ÿæˆ
        function generateMockPost(postType, day, topic) {
            const emojis = ['ğŸ±', 'âœ…', 'ğŸ’¡'];
            const mainEmoji = emojis[0];

            let content = '';

            if (postType === 'specialty') {
                if (day === 'mon') {
                    content = `ç£åŒ»å¸«ãŒæ•™ãˆã‚‹ï¼ã€${topic}ã€‘${mainEmoji}

${topic}ã«ã¤ã„ã¦å¤§åˆ‡ãªãƒã‚¤ãƒ³ãƒˆã‚’ãŠè©±ã—ã—ã¾ã™ã€‚

âœ… ã¾ãšã¯åŸºæœ¬çš„ãªçŸ¥è­˜ã‹ã‚‰
ğŸ’¡ æ—©æœŸç™ºè¦‹ãŒé‡è¦ã§ã™
${mainEmoji} æ„›çŒ«ã®å¥åº·ã‚’å®ˆã‚Šã¾ã—ã‚‡ã†

#çŒ«ã®ã‚ã‚Œã“ã‚Œ`;
                } else if (day === 'tue') {
                    content = `ç£åŒ»å¸«ãŒæ•™ãˆã‚‹ï¼ã€${topic}ã®åˆæœŸç—‡çŠ¶ã€‘${mainEmoji}

${topic}ã®åˆæœŸç—‡çŠ¶ã‚’è¦‹é€ƒã•ãªã„ãŸã‚ã«ï¼š

âœ… ã“ã‚“ãªç—‡çŠ¶ãŒã‚ã£ãŸã‚‰è¦æ³¨æ„
ğŸ’¡ æ—©ã‚ã®å¯¾å‡¦ãŒå¤§åˆ‡
ğŸš¨ æ°—ã«ãªã£ãŸã‚‰ã™ãå—è¨ºã‚’

#çŒ«ã®ã‚ã‚Œã“ã‚Œ`;
                } else {
                    content = `ç£åŒ»å¸«ãŒæ•™ãˆã‚‹ï¼ã€${topic}ã€‘${mainEmoji}

${topic}ã«ã¤ã„ã¦ç£åŒ»å¸«ãŒè§£èª¬ã—ã¾ã™ã€‚

âœ… é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ
ğŸ’¡ ãŠå®¶ã§ã§ãã‚‹ã“ã¨
${mainEmoji} æ„›çŒ«ã®å¥åº·ç®¡ç†

#çŒ«ã®ã‚ã‚Œã“ã‚Œ`;
                }
            } else if (postType === 'cat-breed') {
                content = `ç£åŒ»å¸«ãŒæ•™ãˆã‚‹ï¼ã€${topic}ã€‘${mainEmoji}

${topic}ã®ç‰¹å¾´ã«ã¤ã„ã¦ï¼š

âœ… æ€§æ ¼ã®ç‰¹å¾´
ğŸ’¡ å¥åº·ç®¡ç†ã®ãƒã‚¤ãƒ³ãƒˆ
${mainEmoji} é£¼è‚²ã®ã‚³ãƒ„

#çŒ«ã®ã‚ã‚Œã“ã‚Œ`;
            } else if (postType === 'interactive') {
                content = `ç£åŒ»å¸«ãŒæ•™ãˆã‚‹ï¼ã€${topic}ã€‘${mainEmoji}

ã¿ãªã•ã‚“ã®æ„›çŒ«ã¯ã©ã†ã§ã™ã‹ï¼Ÿ

âœ… ã“ã‚“ãªçµŒé¨“ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ
ğŸ’¡ çš†ã•ã‚“ã®ä½“é¨“è«‡ã‚’ãŠèã‹ã›ãã ã•ã„
${mainEmoji} ã‚³ãƒ¡ãƒ³ãƒˆã§ãŠå¾…ã¡ã—ã¦ã„ã¾ã™

#çŒ«ã®ã‚ã‚Œã“ã‚Œ`;
            }

            displayPost(content);
        }

        // æŠ•ç¨¿è¡¨ç¤º
        function displayPost(content) {
            document.getElementById('output').textContent = content;
            const charCount = countCharacters(content);
            const countElement = document.getElementById('charCount');
            countElement.textContent = `æ–‡å­—æ•°: ${charCount}æ–‡å­—`;
            
            if (charCount <= 140) {
                countElement.className = 'char-count valid';
            } else {
                countElement.className = 'char-count';
            }
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            checkLearningStatus();
        });
    </script>
</body>
</html>